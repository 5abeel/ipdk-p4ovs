export SDE=    ////////sde path
export SDE_INSTALL=$SDE/install
export LD_LIBRARY_PATH=$SDE_INSTALL/lib/
export PYTHONPATH=$SDE_INSTALL/lib/python3.4/:$SDE_INSTALL/lib/python3.4/lib-dynload
export PYTHONHOME=$SDE_INSTALL/lib/python3.4/
./bf_switchd --install-dir $SDE_INSTALL --conf-file $SDE_INSTALL/share/tofinopd/simple_l3_action_selector/simple_l3_action_selector.conf --init-mode=cold --status-port 7777 --skip-hld mkt


bfrt_python
bfrt.simple_l3_action_selector.enable
pipe = bfrt.simple_l3_action_selector.pipe.ingress
pipe.as_sl3.add_with_send(ACTION_MEMBER_ID=1, dst_port=1)
pipe.as_sl3.add_with_send(ACTION_MEMBER_ID=75, dst_port=3)
pipe.as_sl3.add_with_send(ACTION_MEMBER_ID=76, dst_port=2)
pipe.as_sl3.get(ACTION_MEMBER_ID=75)
pipe.as_sl3.get(ACTION_MEMBER_ID=1)
pipe.as_sl3.delete(ACTION_MEMBER_ID=75)
pipe.as_sl3_sel.add(SELECTOR_GROUP_ID=1, ACTION_MEMBER_ID=[1,76], MAX_GROUP_SIZE=10,ACTION_MEMBER_STATUS=[1,1])
pipe.as_sl3_sel.get(SELECTOR_GROUP_ID=1)
from netaddr import IPAddress
pipe.ipv4_host.add(dst_addr=IPAddress('192.168.1.100'),SELECTOR_GROUP_ID=1)
pipe.as_sl3_sel.delete(SELECTOR_GROUP_ID=1)
pipe.as_sl3_sel.add(SELECTOR_GROUP_ID=1, ACTION_MEMBER_ID=[1,76], MAX_GROUP_SIZE=10,ACTION_MEMBER_STATUS=[1,1])
pipe.ipv4_host.add(dst_addr=IPAddress('192.168.1.100'),SELECTOR_GROUP_ID=1)

tcpdump -i TAP1 -XX
tcpdump -i TAP2 -XX

sendp(Ether(dst="00:00:00:00:03:14", src="9e:ba:ce:98:d9:d3")/IP(src="192.168.1.10", dst="192.168.1.100")/TCP(sport=7777, dport=8888)/Raw(load="0"*50), iface='TAP0')

sendp(Ether(dst="00:00:00:00:03:14", src="9e:ba:ce:98:d9:d3")/IP(src="192.168.1.11", dst="192.168.1.100")/TCP(sport=7777, dport=8888)/Raw(load="0"*50), iface='TAP0')
